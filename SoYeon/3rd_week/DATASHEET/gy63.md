# GY-63 고도 센서
### SPI
- 하드웨어적으로 전송 속도를 최대로 얻기 위한 목적
- 클럭을 사용하는 통신 방식
- 하나의 master와 다수의 slave가 연결되는 구조
- SCLK: 클럭 신호를 주고받는 선
- CSB: 칩 선택
- SDI: master에서 데이터를 출력하기 위한 신호 선
- SDO: slave에서 데이터를 출력하기 위한 신호 선
- PS: 프로토콜 선택
- 데이터를 전송하고 수신하는 선이 따로 있기 때문에 전송과 수신이 동시에 이루어 질 수 있다. 
-> I2C 통신에 비해 속도가 빠름
- 빠른 데이터 전송 속도를 필요로 하는데에 많이 사용됨
1. RESET SEQUENCE
- 리셋시퀀스는 전원을 킨 후 calibration prom이 내부 레지스터에 로드되는지 확실하게 하기위해서  한 번 보내야한다. 
- 알려지지 않은 디바이스 ROM을 리셋하는 곳에 사용할 수 있다.
2. CONVERSION SEQUENCE
- 전환 명령은 보정되지 않은 압력(D1) 또는 보정되지 않은 온도(D2) 전환을 준비하는데에 사용된다.
- 칩 선택은 다른 디바이스들과 통신하는 시간동안 할 수 없다. 
- 전환 후에 ADC read 명령을 사용하면 결과는 맨 먼저 최상위 비트에 기록된다. 
- 만약 ADC read 명령 전에, ADC read 명령이 반복되기 전에 실행되지 않는다면 이것은 output 결과로 0을 제공한다. 
- 만약 전환 결과가 0인동안 ADC read 명령이 보내진다면, 전환은 멈추지 않을 것이고 마지막 결과는 틀린 것일 것이다.
- 이미 시작된 전환 프로세스동안 전송된 전환 시퀀스에서도 잘못된 결과가 나올 수도 있다.
3. PROM READ SEQUENCE
- Prom read 명령은 사용자에 의해 리셋된 후 한 번 calibration PROM을 읽고 calibration 계수들을 계산한다.
- 총 128비트인 8개의 주소가  생성된다.
- 주소 0은 factory 데이터와 배열로 구성되어있고 주소 1-6은 calibration 계수로, 주소 7은 시리얼 코드와 순환 중복 검사로 구성되어 있다.
- 명령 시퀀스는 최상위비트가 맨 먼저 기록되는 16비트 결과로 이루어진 8비트이다.
### I2C
- 마이크로프로세서와 저속 주변장치 사이의 통신을 용도로 개발된 것
- 두 개의 선을 사용해서 I2C라고 부른다.
-  SDA: 데이터를 받기 위한 선
-  SCLK: 클럭 신호를 주고 받는 선
(클럭 신호는 어떤 디바이스와 통신을 할지 알려준다.)
-  하나 이상의 master가 존재할 수도 있지만 한 번에 하나의 master와 하나의 slave만 통신할 수 있다.
-  여러 개의 디바이스 중 하나가 mater가 되고 나머지는 다 slave가 된다.
-  slave는 최대 127개까지 연결할 수 있다.
-  동기화 통신 방식
- 짧은 데이터 통신에 주로 사용된다.
- 통신 속도가 따로 정해지지 않아도 된다는 장점이 있다.

1. RESET SEQUENCE
- 리셋 신호는 언제나 보낼 수 있다.
- 리셋을 하려면 리셋을 다시하거나 리셋 신호를 보내면 된다.
- master에서는 시작하라는 신호, 디바이스 주소, write, RESET을 하라는 명령, 정지하라는 신호를 보낸다.
- slave에서는 명령에 대한 응답을 한다.
	
2. PROM READ SEQUENCE
- master에서 시작하라는 신호, 디바이스 주소, write와 read, PROM을 읽으라는 명령, slave에서 보낸 것에 대한 응답 못 받았다는 것에 대한 응답, 정지하라는 신호를 보낸다.
- slave에서는 데이터를 가져온다.

3. CONVERSION SEQUENCE
- 시스템에 명령이 보내졌을 때 값이 계속 바뀌기 때문에 전환이 끝나기 전까지 바쁘게 머물러 있는다.
-  압력 전환 준비 -> ADC read -> 데이터 읽기
- I2C Command to initiate a pressure conversion
	: master에서 시작하라는 신호, 디바이스 주소, write, 준비하라는 명령, 멈추라는 신호를 보내고, slave에서는 master에서 보낸 것에 대한 응답을 한다.
- I2C ADC read sequence
	: master에서 시작하라는 신호, 디바이스 주소, write, 읽으라는 명령, 멈추라는 신호를 보내고, slave에서는 master에서 보낸 것에 대한 응답을 한다.
- I2C answer from MS5611-01BA
	: master에서 시작하라는 신호, 디바이스 주소, read, slave에서 보낸 것에 대한 응답 못 받았다는 것에 대한 응답, 멈추라는 신호를 보내고, slave에서는 데이터를 가져온다.